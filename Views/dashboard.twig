{% extends 'baseAdmin.twig' %}

{% block title %}{{title|default('Administration Dashboard')}}{% endblock %}
{% block content %}
  <p>Welcome to the new administration interface! please take a moment to become comfortable with the updated theme, please note that most options have been relocated to the top right menus.</p>
  <p>Statistics and Reports will be presented in this section in future releases and has been loaded with example information as placeholders</p>
<div class="row placeholders">
    <div class='page-header'><h2>2 Day Live Schedule</h2></div>
    <div class='well'>
        <p class="text-warning">Completed programs with valid start and end dates during the past 2 days are displayed below</p>
        <div id="LiveSchedule" style="width: 100%; min-height: 150px;"><i class="fa fa-circle-o-notch fa-spin"></i></div>
    </div>
    {% if permissions > 1 %}
    <div class='page-header'><h2 class="sub-header">Upcoming PreRecords (30 Days)</h2></div>
    <div class='well'>
        <div id="PreRecord" style="width: 100%; height: 100px;"><i class="fa fa-circle-o-notch fa-spin"></i></div>
    </div>
    {% endif %}
</div>
{% endblock %}
{% block lastScripts %}
    <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['timeline']}]}"></script>
    <script type="text/javascript">

    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var jsonData = $.ajax({
            url: "/api/episode/recent",
            dataType:"json",
            async: false
            }).responseText;

        // Create our data table out of JSON data loaded from server.
        var data = new google.visualization.DataTable(JSON.parse(jsonData));

        // Instantiate and draw our chart, passing in some options.
        var container = document.getElementById('LiveSchedule');
        var chart = new google.visualization.Timeline(container)

        var options = {
          timeline: { colorByRowLabel: true }
        };
        chart.draw(data, options);
    }

    </script>
    <script type="text/javascript">

    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var jsonData = $.ajax({
            url: "/api/episode/prerecords/pending",
            dataType:"json",
            async: false
            }).responseText;

        // Create our data table out of JSON data loaded from server.
        var data = new google.visualization.DataTable(JSON.parse(jsonData));

        // Instantiate and draw our chart, passing in some options.
        var container = document.getElementById('PreRecord');
        var chart = new google.visualization.Timeline(container)

        var options = {
          timeline: { colorByRowLabel: true }
        };
        chart.draw(data, options);
    }

    </script>
{% endblock %}